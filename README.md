# Имитационная и Натурная модели одинаковой топологии для научно-исследовательской работы

## Описание топологии

Мною был написана программа, реализующая имитационную и натурную модели сети со следующей топологией:

- $N=20$ TCP-источников, $N$ TCP-приёмников, двух маршрутизаторов $R1$
  и $R2$ между источниками и приёмниками ($N$ — не менее 20);
- между TCP-источниками и первым маршрутизатором установлены
  дуплексные соединения с пропускной способностью 100 Мбит/с и
  задержкой 20 мс очередью типа DropTail;
- между TCP-приёмниками и вторым маршрутизатором установлены
  дуплексные соединения с пропускной способностью 100 Мбит/с и
  задержкой 20 мс очередью типа DropTail;
- между маршрутизаторами установлено симплексное соединение
  ($R1$---$R2$) с пропускной способностью 20 Мбит/с и задержкой 15 мс
  очередью типа RED, размером буфера 300 пакетов; в обратную сторону~--- 
  симплексное соединение ($R2$---$R1$) с пропускной способностью 15 Мбит/с и
  задержкой 20 мс очередью типа DropTail;
- данные передаются по протоколу FTP поверх TCPReno;
- параметры алгоритма RED: $q_{\min}=75$, $q_{\max}=150$, $q_w=0,002$, $p_{\max}=0.1$;
- максимальный размер TCP-окна 32; размер передаваемого пакета 500
  байт; время моделирования~---25 единиц модельного времени.


## Описание имитационной модели

Для реализации имитационной модели была использованы сценарии NS-2, для построения графиков используется GNUplot и Xgraph для быстрого просмотра.

В имитационной модели представлены следующие разновидности алгоритма RED 

Модификации, реализованные в NS2
- RED
- GRED
- ARED

Модификации, реализуемые с помощью патчей

- RARED [ссылка на исходный код](https://mohittahiliani.blogspot.com/2012/01/refined-adaptive-red-re-ared-or-rared.html)
- NLRED [ссылка на исходный код](https://mohittahiliani.blogspot.com/2012/01/nonlinear-red-nlred-patch-for-ns-2.html)

Модификации, реализуемые самостоятельно

- Hyperbola RED
- RED-QL
- TRED
- SmRED
- POWARED
- FARED
- DSRED

Для смены модификации нужно расскоментировать выбор в файле ns-2/queue.tcl репозитория и закомментировать предыдущую вариацию, для вариаций адаптивных алгоритмов расскоментировать и классическую адаптивную версию.

Модифицированную программу NS-2 можно скачать в репозитории [NS2-with-red](https://github.com/agsargsyan/ns2_with_red) 


## Натурная модель 
 
В mininet, в отличие от NS-2, используются реальные виртуальные устройства. Маршрутизаторы r0 и r1 реализованы с помощью класса LinuxRouter, оконечные устройства подключены к маршрутизаторам с помощью коммутаторов s1 и s2. Для моделирования использована утилита iperf3 с помощью паралельных потоков, где устройства, подключенные к r1 являются серверами, а устройства, подключенные к r0, клиентами.
Все данные на каждый источник выводятся в файлы формата .json с помощью команды plot_iperf.sh [репозиторий](https://github.com/ekfoury/iperf3_plotter), которые с помощью скрипта all.py собираются в один файл для постройки графика метрик cwnd, rtt и rtt_var для всех источников.

Алгоритм RED использован с помощью linux traffic control, параметры настроены в байтах аналогично данным в NS-2. Возникла проблема с тем, что в iperf3 и mininet нет возможноасти для настройки параметра maxcwnd. 





 
 
